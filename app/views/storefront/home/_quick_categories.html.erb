<% names = (@home_categories.presence || %w[Vitamins Protein\ Supplements Digestive\ Health Hair\ Care Skin\ Care]) %>
<%# Presentation details per category %>
<%
meta = {
  "Vitamins"             => { emoji: "ðŸ©º", bg: "linear-gradient(135deg, var(--sage), var(--primary-green))", desc: "Handpicked formulas for everyday wellness" },
  "Protein Supplements"  => { emoji: "ðŸ’ª", bg: "linear-gradient(135deg, var(--soft-green), var(--primary-green))", desc: "Handpicked formulas for everyday wellness" },
  "Digestive Health"     => { emoji: "ðŸ«¶", bg: "linear-gradient(135deg, #a8b993, var(--primary-green))", desc: "Handpicked formulas for everyday wellness" },
  "Hair Care"            => { emoji: "ðŸ’‡â€â™€ï¸", bg: "linear-gradient(135deg, #c49991, var(--earth-brown))", desc: "Natural solutions for healthy, vibrant hair" },
  "Skin Care"            => { emoji: "âœ¨", bg: "linear-gradient(135deg, #d4a574, var(--accent-gold))", desc: "Pure, gentle care for radiant skin" }
}
%>
<section class="container-xxl home-section">
  <header class="text-center mb-4">
    <h2 class="pn-section-title">Shop by Category</h2>
    <p class="text-muted mb-0">Explore essentials by need â€” quick, focused, and fuss-free.</p>
  </header>
  <div class="row g-3 row-cols-2 row-cols-md-3 row-cols-lg-5">
    <% names.each do |name| %>
      <% cat  = Category.find_by(name: name) %>
      <% path = cat ? storefront_category_path(cat) : storefront_products_path(category: name) %>
      <% cfg  = meta[name] || { emoji: "ðŸŒ¿", bg: "linear-gradient(135deg, var(--soft-green), var(--primary-green))", desc: "Handpicked formulas for everyday wellness" } %>
      <div class="col">
        <%= link_to path, class: "pn-cat d-block text-decoration-none" do %>
          <div class="pn-cat__top" style="background: <%= cfg[:bg] %>;">
            <span class="pn-cat-emoji"><%= cfg[:emoji] %></span>
          </div>
          <div class="pn-cat__body">
            <div class="d-flex justify-content-between align-items-center">
              <h3 class="h6 m-0 text-dark"><%= name %></h3>
              <% if (count = cat&.try(:products_count) || (cat&.products&.size rescue nil)).present? %>
                <span class="pn-badge"><%= count %></span>
              <% end %>
            </div>
            <p class="text-muted small mb-0"><%= cfg[:desc] %></p>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</section>
